(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a976d0a8"],{"95a9":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{staticClass:"search-wrapper"},[a("Col",{attrs:{span:"12"}},[a("Row",{staticClass:"search-bar"},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"商品编号",autofocus:"",maxlength:50,clearable:!0},model:{value:t.searchObj.commodityNum,callback:function(e){t.$set(t.searchObj,"commodityNum",e)},expression:"searchObj.commodityNum"}}),a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择平台","label-in-value":!0,clearable:!0},on:{"on-change":t.choosePlatform},model:{value:t.searchObj.saleWay,callback:function(e){t.$set(t.searchObj,"saleWay",e)},expression:"searchObj.saleWay"}},t._l(t.platformList,function(e,i){return a("Option",{key:i,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),a("Row",{staticClass:"search-bar"},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择匠人","label-in-value":!0,clearable:!0},on:{"on-change":t.chooseArtist},model:{value:t.searchObj.artistId,callback:function(e){t.$set(t.searchObj,"artistId",e)},expression:"searchObj.artistId"}},t._l(t.artistList,function(e,i){return a("Option",{key:i,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),a("Row",{staticClass:"search-bar"},[a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",loading:t.searchloading},on:{click:t.search}},[t.searchloading?a("span",[t._v("Loading...")]):a("span",[t._v("查询")])])],1)],1),a("Col",{attrs:{span:"2",offset:"10"}},[a("Button",{attrs:{type:"primary"},on:{click:t.addGoods}},[t._v("新增销售")])],1)],1),a("Table",{attrs:{columns:t.columns,data:t.list}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.dataCountTotal,current:t.currentPage,pageSize:t.pageSize,"show-elevator":"","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.onpagesizechange}})],1)])],1)},o=[],s=(a("ac6a"),{data:function(){var t=this;return{columns:[{title:"序号",type:"index"},{title:"商品编号",key:"commodityNum"},{title:"商品名称",key:"commodityName"},{title:"匠人",key:"artistName"},{title:"销售平台",key:"wayName"},{title:"销售类型",key:"saleStyle"},{title:"销售数量",key:"commodityAmount"},{title:"销售额",key:"salePrice"},{title:"销售时间",key:"saleDate"},{title:"操作",key:"action",width:300,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"info",size:"small",to:"sales-detail?id="+a.row.id},style:{"margin-left":"7px"}},"详情"),e("Button",{props:{type:"info",size:"small",to:"sales-edit?id="+a.row.id},style:{"margin-left":"7px"}},"编辑"),e("Button",{props:{type:"error",size:"small"},style:{"margin-left":"7px"},on:{click:function(){t.deleteRow(a.row.id)}}},"删除")])}}],list:[],pageSize:10,dataCountTotal:0,currentPage:1,searchloading:!1,searchObj:{commodityNum:"",saleWay:"",artistName:"",time:"",artistId:"",wayName:""},artistList:[],platformList:[]}},created:function(){this.init(1,this.pageSize),this.getArtistList(),this.getPlatfromList()},methods:{init:function(t,e){var a=this,i={pageNum:t,pageSize:e};console.log(i),this.$axios({method:"post",url:"/sale/findPageByJx",data:i,headers:{"content-type":"application/json; charset=UTF-8",Authorization:window.localStorage.getItem("token")}}).then(function(t){var e=t.data;console.log(e),1==e.code?(a.list=e.data.list,a.dataCountTotal=e.data.total,console.log(e.data.data)):a.$Notice.warning({title:e.msg})})},addGoods:function(){this.$router.push({name:"sales-edit"})},search:function(){var t=this;this.searchloading=!0,this.$axios({method:"post",url:"/sale/findListByJx",data:this.searchObj,headers:{"content-type":"application/json; charset=UTF-8",Authorization:window.localStorage.getItem("token")}}).then(function(e){t.searchloading=!1;var a=e.data;if(1==a.code){if(0==a.data.length)return void t.$Notice.warning({title:"没有搜索到结果"});t.list=a.data}else t.$Notice.warning({title:a.msg})}).then(function(e){t.searchloading=!1})},deleteRow:function(t){var e=this,a={id:t};this.$axios({method:"post",url:"/sale/deleteOne",data:this.$qs.stringify(a),headers:{Authorization:window.localStorage.getItem("token")}}).then(function(t){e.searchloading=!1;var a=t.data;1==a.code?(e.init(e.currentPage,e.pageSize),e.$Notice.success({title:"删除成功"})):e.$Notice.warning({title:a.msg})}).then(function(t){e.searchloading=!1})},changePage:function(t){this.currentPage=t,this.init(t,this.pageSize)},onpagesizechange:function(t){this.pageSize=t,this.init(1,this.pageSize)},getArtistList:function(){var t=this;this.$axios({method:"post",url:"/artist/findAllList",headers:{"content-type":"application/json; charset=UTF-8",Authorization:window.localStorage.getItem("token")}}).then(function(e){console.log(e);var a=e.data;1==a.code?a.data.forEach(function(e,a){var i={id:e.id,name:e.artistName};t.artistList.push(i)}):t.$Notice.warning({title:a.msg})})},chooseArtist:function(t){this.searchObj.artistName=t.label,this.searchObj.artistId=t.value},getPlatfromList:function(){var t=this;this.$axios({method:"post",url:"/plat/findAllList",headers:{"content-type":"application/json; charset=UTF-8",Authorization:window.localStorage.getItem("token")}}).then(function(e){var a=e.data;1==a.code?a.data.forEach(function(e,a){var i={id:e.id,name:e.wayName};t.platformList.push(i)}):t.$Notice.warning({title:a.msg})})},choosePlatform:function(t){this.searchObj.wayName=t.label,this.searchObj.saleWay=t.value}}}),n=s,l=(a("ae20"),a("2877")),r=Object(l["a"])(n,i,o,!1,null,null,null);r.options.__file="Sales.vue";e["default"]=r.exports},a219:function(t,e,a){},ae20:function(t,e,a){"use strict";var i=a("a219"),o=a.n(i);o.a}}]);