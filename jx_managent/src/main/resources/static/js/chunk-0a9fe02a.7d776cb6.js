(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a9fe02a"],{"3a7a":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Card",[t.id?n("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n        运营编辑\n    ")]):n("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n        运营添加\n    ")]),n("Form",{attrs:{model:t.content,"label-width":120}},[n("FormItem",{attrs:{label:"平台"}},[n("Select",{staticStyle:{width:"400px"},attrs:{placeholder:"请选择平台","label-in-value":!0},on:{"on-change":t.choosePlatform},model:{value:t.content.platid,callback:function(e){t.$set(t.content,"platid",e)},expression:"content.platid"}},t._l(t.platformList,function(e,a){return n("Option",{key:a,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),n("FormItem",{attrs:{label:"活动名称"}},[n("Input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入活动名称"},model:{value:t.content.activityName,callback:function(e){t.$set(t.content,"activityName",e)},expression:"content.activityName"}})],1),n("FormItem",{attrs:{label:"商品名称"}},[n("Input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入商品名称"},model:{value:t.content.commodityName,callback:function(e){t.$set(t.content,"commodityName",e)},expression:"content.commodityName"}})],1),n("FormItem",{attrs:{label:"进度"}},[n("Select",{staticStyle:{width:"400px"},attrs:{placeholder:"请选择进度"},model:{value:t.content.currentActivity,callback:function(e){t.$set(t.content,"currentActivity",e)},expression:"content.currentActivity"}},t._l(t.currentActivityList,function(e,a){return n("Option",{key:a,attrs:{value:e}},[t._v(t._s(e))])}))],1),n("FormItem",{attrs:{label:"匠人"}},[n("Select",{staticStyle:{width:"400px"},attrs:{placeholder:"请选择匠人","label-in-value":!0},on:{"on-change":t.chooseArtist},model:{value:t.content.artistid,callback:function(e){t.$set(t.content,"artistid",e)},expression:"content.artistid"}},t._l(t.artistList,function(e,a){return n("Option",{key:a,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),n("FormItem",{attrs:{label:"预计上线时间"}},[n("DatePicker",{staticStyle:{width:"400px"},attrs:{value:t.content.preDate,type:"date",format:"yyyy-MM-dd",placement:"bottom-start",placeholder:"请选择预计上线时间"},on:{"on-change":function(e){t.content.preDate=e}}})],1),n("FormItem",{attrs:{label:"备注"}},[n("Input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入备注"},model:{value:t.content.note,callback:function(e){t.$set(t.content,"note",e)},expression:"content.note"}})],1),n("div",{staticClass:"btn"},[n("Button",{staticStyle:{width:"120px"},attrs:{type:"primary",loading:t.loading,size:"large"},on:{click:t.submit}},[t.loading?n("span",[t._v("Loading...")]):n("span",[t._v("提交")])])],1)],1)],1)},i=[],o=(n("ac6a"),n("8615"),n("ade3")),s={data:function(){return{content:Object(o["a"])({platName:"",activityName:"",currentActivity:"",artistName:"",artistid:"",platid:""},"platName",""),id:"",loading:!1,currentActivityList:["静象入库","产品拍照","产品文案","页面设计","后台上传","平台审核","活动上线","活动结束"],artistList:[],platformList:[],preDate:"2019-5-4"}},created:function(){this.id=this.$route.query.id,this.getArtistList(),this.getPlatfromList(),this.id&&this.init()},methods:{init:function(){var t=this,e={id:this.id};this.$axios({method:"post",url:"/operation/getOne/",data:this.$qs.stringify(e),headers:{Authorization:window.localStorage.getItem("token")}}).then(function(e){console.log(n);var n=e.data;1==n.code?t.content=n.data:t.$Notice.warning({title:n.msg})})},add:function(){var t=this;this.$axios({method:"post",url:"/operation/addOne",data:this.content,headers:{"content-type":"application/json; charset=UTF-8",Authorization:window.localStorage.getItem("token")}}).then(function(e){t.loading=!1;var n=e.data;1==n.code?t.$router.push({name:"operating-list"}):t.$Notice.warning({title:n.msg})}).then(function(e){t.loading=!1})},edit:function(){var t=this;this.content.id=this.id,this.$axios({method:"post",url:"/operation/updateOne",data:this.content,headers:{"content-type":"application/json; charset=UTF-8",Authorization:window.localStorage.getItem("token")}}).then(function(e){t.loading=!1;var n=e.data;1==n.code?t.$router.push({name:"operating-list"}):t.$Notice.warning({title:n.msg})}).then(function(e){t.loading=!1})},submit:function(){0!=Object.values(this.content).length?(this.loading=!0,this.id?this.edit():this.add()):this.$Notice.warning({title:"请输入数据"})},getArtistList:function(){var t=this;this.$axios({method:"post",url:"/artist/findAllList",data:this.content,headers:{Authorization:window.localStorage.getItem("token")}}).then(function(e){console.log(e);var n=e.data;1==n.code?n.data.forEach(function(e,n){var a={id:e.id,name:e.artistName};t.artistList.push(a)}):t.$Notice.warning({title:n.msg})})},chooseArtist:function(t){this.content.artistName=t.label,this.content.artistid=t.value},getPlatfromList:function(){var t=this;this.$axios({method:"post",url:"/plat/findAllList",data:this.content,headers:{Authorization:window.localStorage.getItem("token")}}).then(function(e){var n=e.data;1==n.code?n.data.forEach(function(e,n){var a={id:e.id,name:e.wayName};t.platformList.push(a)}):t.$Notice.warning({title:n.msg})})},choosePlatform:function(t){this.content.platName=t.label,this.content.platid=t.value}}},c=s,l=(n("c440"),n("2877")),r=Object(l["a"])(c,a,i,!1,null,null,null);r.options.__file="Edit.vue";e["default"]=r.exports},4761:function(t,e,n){},"504c":function(t,e,n){var a=n("0d58"),i=n("6821"),o=n("52a7").f;t.exports=function(t){return function(e){var n,s=i(e),c=a(s),l=c.length,r=0,d=[];while(l>r)o.call(s,n=c[r++])&&d.push(t?[n,s[n]]:s[n]);return d}}},8615:function(t,e,n){var a=n("5ca1"),i=n("504c")(!1);a(a.S,"Object",{values:function(t){return i(t)}})},c440:function(t,e,n){"use strict";var a=n("4761"),i=n.n(a);i.a}}]);