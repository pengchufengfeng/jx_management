(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ad5d10c2"],{"0210":function(t,e,o){},"504c":function(t,e,o){var n=o("0d58"),a=o("6821"),i=o("52a7").f;t.exports=function(t){return function(e){var o,c=a(e),s=n(c),l=s.length,r=0,d=[];while(l>r)i.call(c,o=s[r++])&&d.push(t?[o,c[o]]:c[o]);return d}}},8615:function(t,e,o){var n=o("5ca1"),a=o("504c")(!1);n(n.S,"Object",{values:function(t){return a(t)}})},c8f6:function(t,e,o){"use strict";var n=o("0210"),a=o.n(n);a.a},e564:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Card",[o("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      "+t._s(t.id?"编辑商品":"添加商品")+"\n  ")]),o("Form",{attrs:{model:t.content,"label-width":120}},[o("FormItem",{attrs:{label:"商品编号"}},[o("Input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入商品编号"},model:{value:t.content.commodityNum,callback:function(e){t.$set(t.content,"commodityNum",e)},expression:"content.commodityNum"}})],1),o("FormItem",{attrs:{label:"商品名称"}},[o("Input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入商品名称"},model:{value:t.content.commodityName,callback:function(e){t.$set(t.content,"commodityName",e)},expression:"content.commodityName"}})],1),o("FormItem",{attrs:{label:"分类"}},[o("Select",{staticStyle:{width:"400px"},attrs:{placeholder:"请选择商品分类"},model:{value:t.content.className,callback:function(e){t.$set(t.content,"className",e)},expression:"content.className"}},t._l(t.classNameList,function(e,n){return o("Option",{key:n,attrs:{value:e}},[t._v(t._s(e))])}))],1),o("FormItem",{attrs:{label:"尺寸"}},[o("Input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入尺寸"},model:{value:t.content.commodityScale,callback:function(e){t.$set(t.content,"commodityScale",e)},expression:"content.commodityScale"}})],1),o("FormItem",{attrs:{label:"作者"}},[o("Select",{staticStyle:{width:"400px"},attrs:{placeholder:"请选择作者","label-in-value":!0},on:{"on-change":t.chooseArtist},model:{value:t.content.artistId,callback:function(e){t.$set(t.content,"artistId",e)},expression:"content.artistId"}},t._l(t.artistList,function(e,n){return o("Option",{key:n,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),o("FormItem",{attrs:{label:"工艺"}},[o("Input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入工艺"},model:{value:t.content.way,callback:function(e){t.$set(t.content,"way",e)},expression:"content.way"}})],1),o("FormItem",{attrs:{label:"产地"}},[o("Input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入产地"},model:{value:t.content.palace,callback:function(e){t.$set(t.content,"palace",e)},expression:"content.palace"}})],1),o("FormItem",{attrs:{label:"泥土"}},[o("Input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入泥土"},model:{value:t.content.dust,callback:function(e){t.$set(t.content,"dust",e)},expression:"content.dust"}})],1),o("FormItem",{attrs:{label:"烧制温度"}},[o("Input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入烧制温度"},model:{value:t.content.temput,callback:function(e){t.$set(t.content,"temput",e)},expression:"content.temput"}})],1),o("FormItem",{attrs:{label:"简介"}},[o("Input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入简介"},model:{value:t.content.note,callback:function(e){t.$set(t.content,"note",e)},expression:"content.note"}})],1),o("FormItem",{attrs:{label:"商品图片"}},[t.content.photo?o("img",{attrs:{src:t.content.photo,alt:""}}):t._e(),o("Upload",{ref:"goodsPicture",attrs:{multiple:"",action:"/commodity/uploadImage","on-success":t.uploadSuccess,format:["jpg","jpeg","png","gif","bmp"],"max-size":20480,"on-format-error":t.uploadPictureFormatError,"on-exceeded-size":t.uploadMaxSize,"with-credentials":!0,"on-error":t.uploadError,"on-remove":t.removeUploadedPictureFile,"before-upload":t.pictureBeforeUpload,"show-upload-list":!0}},[o("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("选择商品图片")])],1)],1),o("FormItem",{attrs:{label:"商品上架量"}},[o("Input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入上架量"},model:{value:t.content.commodityShelf,callback:function(e){t.$set(t.content,"commodityShelf",e)},expression:"content.commodityShelf"}})],1),o("FormItem",{attrs:{label:"商品库存"}},[o("Input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入上架量"},model:{value:t.stock,callback:function(e){t.stock=e},expression:"stock"}})],1),o("FormItem",{attrs:{label:"商品状态"}},[t.id?o("Input",{staticStyle:{width:"400px"},attrs:{readonly:!0},model:{value:t.content.commodityStatus,callback:function(e){t.$set(t.content,"commodityStatus",e)},expression:"content.commodityStatus"}}):o("Select",{staticStyle:{width:"400px"},attrs:{placeholder:"请选择商品状态"},model:{value:t.content.commodityStatus,callback:function(e){t.$set(t.content,"commodityStatus",e)},expression:"content.commodityStatus"}},t._l(t.statusList,function(e,n){return o("Option",{key:n,attrs:{value:e}},[t._v(t._s(e))])}))],1),o("div",{staticClass:"btn"},[o("Button",{staticStyle:{width:"120px"},attrs:{type:"primary",loading:t.loading,size:"large"},on:{click:t.submit}},[t.loading?o("span",[t._v("Loading...")]):o("span",[t._v("提交")])])],1)],1)],1)},a=[],i=(o("7f7f"),o("ac6a"),o("8615"),{data:function(){return{content:{commodityNum:"",commodityName:"",className:"",artistName:"",way:"",palace:"",dust:"",temput:"",photo:"",commodityStock:"",commodityStatus:""},id:"",loading:!1,saleNum:"",classNameList:["茶杯","茶壶","茶盘","茶叶罐","盖碗","公道杯","套装","茶道配件","茶道装饰","瓷板画","文房用品"],statusList:["上架","销售中","已售完"],artistList:[]}},created:function(){this.id=this.$route.query.id,this.getArtistList(),this.id&&(this.init(),this.getSaleNum())},computed:{stock:function(){var t=this.content.commodityShelf-this.saleNum;return this.content.commodityStock=t,t}},methods:{init:function(){var t=this,e={id:this.id};this.$axios.post("/commodity/getOne/",this.$qs.stringify(e)).then(function(e){console.log(o);var o=e.data;1==o.code?t.content=o.data:t.$Notice.warning({title:o.msg})})},add:function(){var t=this;this.$axios({method:"post",url:"/commodity/addOne",data:this.content,headers:{"content-type":"application/json; charset=UTF-8"}}).then(function(e){t.loading=!1;var o=e.data;1==o.code?t.$router.push({name:"goods-list"}):t.$Notice.warning({title:o.msg})}).then(function(e){t.loading=!1})},edit:function(){var t=this;this.content.id=this.id,this.$axios({method:"post",url:"/commodity/updateOne",data:this.content,headers:{"content-type":"application/json; charset=UTF-8"}}).then(function(e){t.loading=!1;var o=e.data;1==o.code?t.$router.push({name:"goods-list"}):t.$Notice.warning({title:o.msg})}).then(function(e){t.loading=!1})},submit:function(){0!=Object.values(this.content).length?(this.loading=!0,this.id?this.edit():this.add()):this.$Notice.warning({title:"请输入数据"})},uploadSuccess:function(t,e){var o=t;console.log(e),1==o.code?this.content.photo=o.data:this.$Message.error(t.error)},uploadPictureFormatError:function(t){this.$Notice.warning({title:"文件格式不正确",desc:"文件格式错误 "+t.name+" 不正确, 请选择 jpg， jpeg， png， gif or bmp."})},removeUploadedPictureFile:function(t){},uploadMaxSize:function(t){this.$Notice.warning({title:"文件太大",desc:"文件  "+t.name+" 太大， 请不要超过 20M."})},uploadError:function(t,e){console.log(t),console.log(e),this.$Message.error(t)},pictureBeforeUpload:function(){},getSaleNum:function(){var t=this;this.$axios({method:"post",url:"/sale/getComSaleNum",data:{id:this.id},headers:{"content-type":"application/json; charset=UTF-8"}}).then(function(e){var o=e.data;1==o.code?t.saleNum=o.data:t.saleNum=0,t.content.commodityStock=t.content.commodityShelf-o.data.data})},getArtistList:function(){var t=this;this.$axios.post("/artist/findAllList").then(function(e){console.log(e);var o=e.data;1==o.code?o.data.forEach(function(e,o){var n={id:e.id,name:e.artistName};t.artistList.push(n)}):t.$Notice.warning({title:o.msg})})},chooseArtist:function(t){this.content.artistName=t.label,this.content.artistId=t.value}}}),c=i,s=(o("c8f6"),o("2877")),l=Object(s["a"])(c,n,a,!1,null,null,null);l.options.__file="ListEdit.vue";e["default"]=l.exports}}]);